<ngx-loading [show]="loader"></ngx-loading>
<!-- <ngx-loading [show] ="saveLoder"></ngx-loading> -->
<ngx-spinner
bdColor="rgba(76, 122, 113, 0.61)"
size="medium"
color="#00000"
type="ball-scale-multiple"
fullScreen=true
loadingText = 'Processing'
>
<p style="font-size: 16px;color:#0000">Processing</p>
</ngx-spinner> 
<div class="banner-w3layoutsSales">
    <!--Top-Bar-->
    <div class="header">
        <nav class="navbar navbar-default">
            <app-header></app-header>
            <div class="clearfix"></div>
        </nav>
    </div>

    <!--main screen-->
    <div class="w3l_banner_info" id="name" style="width:100% !important;">
        <!-- <h1 class="text-center" style="font-size:20px;">Customer Invoice Information</h1> -->
        <div class="col-md-12 col-sm-12 banner-form-agileinfo">
            <form [formGroup]="invoiceForm">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-10 col-md-push-1 button-group">
                            <div class="btn-group btn-group-justified">
                                <button style="width:50%" class="btn btn-primary active" id="customerInformation" (click)="routingLink()">
                                    <em class="fa fa-user" style="margin-right: 5px"></em>Customer Information</button>
                                    <button style="width:40%"  id="uploadTraffic" class="btn btn-primary active"
                                    [routerLink]="[('/uploadWorksheet')]">
                                  <em class="fa fa-upload" style="margin-right: 5px"></em>Upload Traffic Flow</button>
                                <button style="width:50%"  id="trafficdata"  class="btn btn-primary " [routerLink]="[('/trafficdatanew')]">
                                    <em class="fa fa-file" style="margin-right: 5px"></em>Traffic Data</button>
                                <button style="width:50%" class="btn btn-primary active"  id="carrierAnalytics" (click)="carrierAnalytics()">
                                    <em class="fa fa-file" style="margin-right: 5px"></em>Analytics</button>
                                    <button style="width:40%" class="btn btn-primary active" id="contractpage" (click)="getBusisnessRule()" >
                                        <em class="fa fa-file" style="margin-right: 5px"></em>Create TL contract</button>
                                <!-- <button style="width:50%" class="btn btn-primary active" *ngIf="disableAnalyticsButton" (click)="carrierAnalytics()" [disabled]="disableAnalyticsButton === true">
                                    <em class="fa fa-file" style="margin-right: 5px"></em>Disable Analytics</button> -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="text-center" *ngIf="showLoader">
                    <em class="fa fa-spinner fa-spin" aria-hidden="true" style="color: #a2705c; font-size: 40px;"></em>
                    <span style="padding: 35px; color: #a2705c; font-size: 40px; ">
                        Please Wait in this page until the loader stops
                    </span>
                </div> -->
                <!-- <div class="row">
                   <div class="col-md-12 col-lg-8 col-lg-push-2 div-group"> -->
                        <!-- <button class="logisticsBtn" id="addBtn" style="width: 100%" type="submit" value="Please click this link to choose carrier"
                        (click)="openCarrierModal()">
                    </button> -->
                     <!-- <a (click)="openCarrierModal()">Please click this link to choose carrier</a> -->
                     <!-- <a (click)="openCarrierModal()" style="width:100%" class="btn btn-info" role="button">Please click this link to choose carrier</a>

                    </div>
                  
                </div> -->
                <div class="row">
                    <div class="col-md-12 col-lg-12 div-group">
                        <div class="row">
                            <!-- <div class="col-sm-12"> -->
                                <div class="col-sm-2" style="width: 20% !important;">

                                <label>Company Name</label>
                                <span style="color: #FF0000">*</span>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="companyName" placeholder="Company Name" formControlName="customerId" (keydown)="checkEnterKey($event, 'companyName')" autocomplete="none">
                                </div>
                                </div>
                                <div class="col-sm-2" style="width:11%!important;">
                                    <label>Shipment Date</label>
                                    <span style="color: #FF0000">*</span>
                                    <div class="form-group">
                                        <input type="text" class="form-control" placeholder="mm/dd/yy" 
                                         mask="00/00/0000"  formControlName="shipmentDate" id="shipmentDate"
                                            autocomplete="none" autofocus (blur)="fromDate($event)" 
                                             (keydown)="checkEnterKey($event, 'shipmentDate')">
                                    </div>
                                </div>
                                <div class="col-sm-2" style="width:11%!important;">
                                    <label>Carrier</label>
                                    <!-- <span style="color: #FF0000">*</span> -->
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="carrier" placeholder="carrier" formControlName="carrier" (keydown)="checkEnterKey($event, 'carrier')"
                                            autocomplete="none">
                                    </div>
                                </div>
                                <div class="col-sm-1">
                                    <label>Origin Zip</label>
                                    <span style="color: #FF0000">*</span>
                                    <span *ngIf="zipCodeErrorResponseForOrigin" style="color: #ff0000">Invalid Zipcode</span>
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="originZip" placeholder="Origin Zip" formControlName="originZip" (keydown)="checkEnterKey($event, 'originZip')"
                                            (change)="checkForZipCodes(invoiceForm.controls['originZip'].value, 'origin')" ngPattern="/[0-9]/"
                                            onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" maxlength="5" autocomplete="nope">
                                    </div>
                                </div>
                                <div class="col-sm-1">
                                    <label>Origin State</label>
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="originState" placeholder="Origin State" formControlName="originState" [disabled]="true">
                                    </div>
                                </div>
                                <div class="col-sm-1" style="width:11%!important;">
                                    <label>Destination Zip</label>
                                    <span style="color: #FF0000">*</span>
                                    <span *ngIf="zipCodeErrorResponseForDestination" style="color: #ff0000">Invalid Zipcode</span>
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="destinationZip" placeholder="Destination Zip" formControlName="destinationZip"
                                            (change)="checkForZipCodes(invoiceForm.controls['destinationZip'].value, 'destination')" ngPattern="/[0-9]/"
                                            onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" maxlength="5" (keydown)="checkEnterKey($event, 'destinationZip')"
                                            autocomplete="nope">
                                    </div>
                                </div>
                                <div class="col-sm-1" style="width:11%!important;">
                                    <label>Destination State</label>
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="destinationState" placeholder="Destination State" formControlName="destinationState" [disabled]="true">
                                    </div>
                                </div>
                                <div class="col-sm-1">
                                    <label>Pieces</label>
                                    <!-- <span style="color: #FF0000">*</span> -->
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="pieces" placeholder="Pieces" value="1" formControlName="pallets" ngPattern="/[0-9]/"
                                            onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" maxlength="3" (keydown)="checkEnterKey($event, 'pieces')"
                                            autocomplete="nope">
                                    </div>
                                </div>
                                <div class="col-sm-1">
                                    <label>Multiclass</label>
                                    <!-- <span style="color: #FF0000">*</span> -->
                                    <div class="form-group">
                                        <!-- <input type="checkbox" id="getRate" name="getRate" class="option-input" (change)="checkGetRate($event.srcElement.checked)" [disabled] = "showNoShipmentError"> -->

                                        <input type="checkbox"  id="multiclass" placeholder="Pieces" value="1" formControlName="multiclass" class="option-input" (change)="checkGetRate($event)"
                                            autocomplete="nope">
                                    </div>
                                </div>
                               
                            <!-- </div> -->
                        </div>
                        <div class="row">

                          
                            <div class="col-sm-1">
                                <label>Class</label>
                                <span style="color: #FF0000">*</span>
                                <input class="form-control" id="classification" name="classification" ngPattern="/[0-9.]/" maxlength="4" onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')"
                                (blur)="checkForClass(invoiceForm.controls['class'].value)" formControlName="class" [typeahead]="classArray"
                                autocomplete="nope" (keydown)="checkEnterKey($event, 'classification')">
                            <span style="font-size: 14px;color: red" *ngIf="showErrorMessageForClass">The class is invalid</span>
                                <!-- <input class="form-control" id="classification" name="classification" ngPattern="/[0-9.]/" maxlength="4" onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')"
                                    (blur)="checkForClass(invoiceForm.controls.class.value)" formControlName="class" [typeahead]="classArray"
                                    autocomplete="nope" (keydown)="checkEnterKey($event, 'classification')">
                                <span style="font-size: 14px;color: red" *ngIf="showErrorMessageForClass">The class is invalid</span> -->
                            </div>
                         
                            <div class="col-sm-1">
                                <label id="weightDiv">Weight</label>
                                <span style="color: #FF0000">*</span>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Weight" id="weight" formControlName="weight" (keydown)="checkEnterKey($event, 'weight')"
                                        ngPattern="/[0-9.]/" onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" maxlength="5"
                                        autocomplete="nope">
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <label>Fuel Charge</label>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="fuelCharge" placeholder="Fuel Charge" formControlName="fuelCharge" ngPattern="/[0-9.]/"
                                        onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" (keydown)="checkEnterKey($event, 'fuelCharge')"
                                        autocomplete="nope">
                                </div>
                            </div>
                            <div class="col-sm-1" style="width:11%!important;">
                                <label>Invoice Amount</label>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="invoiceAmt" placeholder="Invoice Amount" formControlName="invoiceAmount" ngPattern="/[0-9.]/"
                                        onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" (keydown)="checkEnterKey($event, 'invoiceAmt')"
                                        autocomplete="nope">
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <label>Accessorial</label>
                                <div class="form-group">
                                    <select class="selectField" formControlName="assessorial" (change)="selectAccessorials(invoiceForm.value)">
                                        <option value="" hidden>Select</option>
                                        <option id="assessorialName" *ngFor="let assessorial of assessorialNames" value={{assessorial.id}}>{{assessorial.itemName}}-{{assessorial.name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-1" style="width:12%!important;">
                                <label>Accessorial Charge</label>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Accessorial Charge" id="assessorialCharge" formControlName="assessorialCharge" ngPattern="/[0-9.]/"
                                        onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" (keydown)="checkEnterKey($event, 'assessorialCharge')" autocomplete="nope">
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group" *ngIf="invoiceForm.controls['assessorial'].value!== '' && invoiceForm.controls['assessorialCharge'].value!== ''">
                                    <button class="logisticsBtn" id="addBtn" style="width: 100%" type="submit" [disabled]="invoiceForm.controls['assessorialCharge'].value === ''"
                                        (click)="addAssessorials(invoiceForm.value)">
                                        <em class="fa fa-plus" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>
                                    </button>
                                </div>
                            </div>
                            <div  *ngIf="showOtherAccessorial" class="col-sm-1" style="width:11%!important;">
                                <label>Other Accessorial</label>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Other Accessorial Name" id="otherassessorial" formControlName="otherassessorial" ngPattern="/[a-zA-Z]/"
                                         (keydown)="checkEnterKey($event, 'otherassessorial')" autocomplete="nope">
                                </div>
                            </div>
                            <div  *ngIf="showOtherAccessorial" class="col-sm-1" style="width:15%!important;">
                                <label>Other Accessorial Charge</label>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Other Accessorial Charge" id="otherassessorialCharge" formControlName="otherassessorialCharge" ngPattern="/[0-9.]/"
                                        onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" (keydown)="checkEnterKey($event, 'otherassessorialCharge')" autocomplete="nope">
                                </div>
                            </div>
                            <div  *ngIf="showOtherAccessorial" class="col-sm-1">
                                <div class="form-group" *ngIf="invoiceForm.controls['otherassessorial'].value!== '' && invoiceForm.controls['otherassessorialCharge'].value!== ''">
                                    <button class="logisticsBtn" id="otheraddBtn" style="width: 100%" type="submit" [disabled]="invoiceForm.controls['otherassessorialCharge'].value === ''"
                                        (click)="addAssessorials1(invoiceForm.value)">
                                        <em class="fa fa-plus" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>
                                    </button>
                                </div>
                            </div>
                        </div>


                        <!-- <div class="row" *ngIf="showOtherAccessorial">
                            <div class="col-sm-5">
                                <label>Other Accessorial</label>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Other Accessorial Name" id="otherassessorial" formControlName="otherassessorial" ngPattern="/[a-zA-Z]/"
                                         (keydown)="checkEnterKey($event, 'otherassessorial')" autocomplete="nope">
                                </div>
                            </div>
                            <div class="col-sm-5">
                                <label>Other Accessorial Charge</label>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Other Accessorial Charge" id="otherassessorialCharge" formControlName="otherassessorialCharge" ngPattern="/[0-9.]/"
                                        onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" (keydown)="checkEnterKey($event, 'otherassessorialCharge')" autocomplete="nope">
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="form-group" *ngIf="invoiceForm.controls.otherassessorial.value!== '' && invoiceForm.controls.otherassessorialCharge.value!== ''">
                                    <button class="logisticsBtn" id="otheraddBtn" style="width: 100%" type="submit" [disabled]="invoiceForm.controls.otherassessorialCharge.value === ''"
                                        (click)="addAssessorials1(invoiceForm.value)">
                                        <em class="fa fa-plus" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>
                                    </button>
                                </div>
                            </div>
                        </div> -->

                        <div class="row" *ngIf="showAccessorials">
                            <div class="table-responsive col-sm-12">
                                <table class="table-bordered table-responsive" style="color: #9c7357; width: 60%;">
                                    <tr class="text-center">
                                        <th class="text-center">Accessorials</th>
                                        <th class="text-center">Charges</th>
                                        <th class="text-center">Delete</th>
                                    </tr>
                                    <tr *ngFor="let assessorial of assessorialArray; let i = index">
                                        <td class="text-center" *ngIf="assessorial.charge!='' && assessorial.charge !== null">{{assessorial.shortName}}</td>
                                        <td class="text-center" *ngIf="assessorial.charge!='' && assessorial.charge !== null">${{assessorial.charge}}</td>
                                        <td class="text-center" *ngIf="assessorial.charge!='' && assessorial.charge !== null">
                                            <em class="fa fa-minus-circle" aria-hidden="true" (click)="deleteAssessorial(assessorial, i)"></em>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row" *ngIf="multiclassTable.length > 0">
                            <div class="table-responsive col-sm-12">
                                <table class="table-bordered table-responsive" style="color: #9c7357; width: 60%;">
                                    <tr class="text-center">
                                        <th class="text-center">Class</th>
                                        <th class="text-center">Weight</th>
                                        <th class="text-center">Delete</th>
                                    </tr>
                                    <tr *ngFor="let data of multiclassTable; let i = index">
                                        <td class="text-center" >{{data.classification}}</td>
                                        <td class="text-center" > {{data.multiclassweight}}</td>
                                         <td><em class="fa fa-minus-circle" aria-hidden="true" (click)="deletemulticlassrow(data, i)"></em>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <button class="logisticsBtn" style="width: 100%" type="submit" (click)="clearForm('form')">
                                    <em class="fa fa-refresh" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>Clear</button>
                            </div>
                            <div  *ngIf="!updateFlag" class="col-md-3">
                                <!-- <button class="logisticsBtn" style="width: 100%" type="submit" id="continueBtn" [disabled]="!invoiceForm.controls.carrier.valid || !invoiceForm.controls.class.valid 
                        || !invoiceForm.controls.weight.valid || !invoiceForm.controls.invoiceAmount.valid || 
                        !invoiceForm.controls.originZip.valid || !invoiceForm.controls.destinationZip.valid 
                        || zipCodeErrorResponseForDestination === true || zipCodeErrorResponseForOrigin === true" (click)="getRate(invoiceForm.value)"> -->
                        <button class="logisticsBtn" style="width: 100%" type="submit" id="AddrowBtn"  [disabled]="!invoiceForm.controls['weight'].valid || !invoiceForm.controls['invoiceAmount'].valid || 
                        !invoiceForm.controls['originZip'].valid || !invoiceForm.controls['destinationZip'].valid 
                        || zipCodeErrorResponseForDestination === true || zipCodeErrorResponseForOrigin === true || !invoiceForm.controls['pallets'].valid || showErrorMessageForClass === true " (click)="getRate(invoiceForm.value)">
                        
                                    <em class="fa fa-check-circle" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>Add Row</button>
                            </div>
                            <div  *ngIf="updateFlag" class="col-md-3">
                                <!-- <button class="logisticsBtn" style="width: 100%" type="submit" id="continueBtn" [disabled]="!invoiceForm.controls.carrier.valid || !invoiceForm.controls.class.valid 
                        || !invoiceForm.controls.weight.valid || !invoiceForm.controls.invoiceAmount.valid || 
                        !invoiceForm.controls.originZip.valid || !invoiceForm.controls.destinationZip.valid 
                        || zipCodeErrorResponseForDestination === true || zipCodeErrorResponseForOrigin === true" (click)="getRate(invoiceForm.value)"> -->
                        <button class="logisticsBtn" style="width: 100%" type="submit" id="EditRowBtn"  [disabled]="!invoiceForm.controls['class'].valid 
                        || !invoiceForm.controls['weight'].valid || !invoiceForm.controls['invoiceAmount'].valid || 
                        !invoiceForm.controls['originZip'].valid || !invoiceForm.controls['destinationZip'].valid  
                        || zipCodeErrorResponseForDestination === true || zipCodeErrorResponseForOrigin === true  || !invoiceForm.controls['class'].valid  
                        || !invoiceForm.controls['weight'].valid " (click)="getRate(invoiceForm.value)">
                                    <em class="fa fa-check-circle" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>Save Row</button>
                            </div>
                            <div class="col-md-3">
                                <button class="logisticsBtn" style="width: 100%" type="submit" id="submitBtn" (click)="carrierAnalytics()">
                                    <em class="fa fa-save" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>
                                    Carrier Analytics</button>
                            </div>
                            <div class="col-md-3">
                                <button class="logisticsBtn" style="width: 100%" type="submit" id="submitBtn" (click)="saveRawData()">
                                    <em class="fa fa-save" aria-hidden="true" style="font-size: 20px; vertical-align: middle;margin-right: 5px;"></em>
                                    Save Raw Data</button>
                            </div>
                        </div>
                        <!-- <div class="row" >
                            <div class="col-md-8 col-md-push-2">
                                <button class="logisticsBtn" style="width: 100%" type="submit" (click)="carrierAnalytics()">
                                    Carrier Analytics</button>
                            </div>
                        </div> -->
                    </div>
                </div>
                <div class="clearfix">&nbsp;</div>
            </form>
        </div>
        <div class="clearfix">&nbsp;</div>
    </div>
    <!--//Slider-->
    <div class="clearfix"></div>
    <div class="clearfix"></div>
    <div class="col-md-12 col-sm-12" *ngIf="itemArray?.length > 0">
            <!-- <div style="float:right;margin-top:-25px;" *ngIf="processingLoader">
                    <span style="padding: 0px; color: #a2705c; font-size: 40px; ">
                        <em class="fa fa-spinner fa-spin" aria-hidden="true" style="color: #a2705c; font-size: 40px;"></em> 
                    </span>
                    <span *ngIf="processingLoader">Processing</span>
                    <span *ngIf="processingLoader">{{responseLength}} Of {{itemArray?.length}}</span>
          
                </div> -->
                <div>
                <!-- <span style="float:right" *ngIf="completedLoader">Completed</span> -->
                   </div>
        <div class="table-responsive" style="margin-top: 50px;height:700px;overflow-y:scroll">
            <table class="table  table-striped table-bordered">
                <thead >
                    <tr>
                        <th class="sticky">Sl No</th>
                        <th class="sticky">Shipment Date</th>
                        <th class="sticky">Carrier</th>
                        <th class="sticky">Type</th>
                        <th class="sticky">Origin Zip</th>
                        <th class="sticky">Origin State</th>
                        <th class="sticky">Dest Zip</th>
                        <th class="sticky">Dest State</th>
                        <th class="sticky">Weight</th>
                        <th class="sticky">Class</th>
                        <th class="sticky">Pieces</th>
                        <th class="sticky">Inv Amt</th>
                        <th class="sticky">Fuel Surcharge</th>
                        <th class="sticky">Accessorial</th>
                        <th class="sticky">Edit</th>
                        <th class="sticky">Delete</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of itemArray ; let i=index;">
                        <td>{{item?.slNo}}</td>
                        <td [class.red-td]="item.invalidShipmentDate === true">{{item?.shipmentDate | date:'MM-dd-yyyy'}}</td>
                        <td>{{item?.carrier}}</td>
                        <td>{{item?.typeOfInvoice}}</td>
                        <td [class.red-td]="item.invalidOriginZip === true">{{item?.originZip}}</td>
                        <td [class.red-td]="item.invalidoriginState === true">{{item?.originState}}</td>
                        <td [class.red-td]="item.invalidDestinationZip === true">{{item?.destinationZip}}</td>
                        <td [class.red-td]="item.invaliddestinationState === true">{{item?.destinationState}}</td>
                        <td>{{item?.weight}}</td>
                        <td >{{item?.class}}</td>
                        <td>{{item?.pallets}}</td>
                        <td>${{item?.invoiceAmount}}</td>
                        <td>${{item?.fuelCharge}}</td>
                        <td *ngIf="item?.assessorial.length > 0">
                            <tr>Total - {{item?.assessorialCharge}}</tr>
                            <!-- <tr *ngFor="let assessorial of item?.assessorial">{{assessorial?.shortName}}-${{assessorial?.charge}}</tr> -->
                            <a class="logisticsBtn" data-toggle="modal" data-target="#view-assessorial" (click)="viewAssessorialDetails(item)">View</a>
                        </td>
                        <td *ngIf="item?.assessorial.length === 0">
                               -
                            </td>
                        <td id="editRowId" (click)="editItemArray(item, item.slNo)"><em class="fa fa-pencil-square-o" aria-hidden="true"></em></td>
                        <td id="editRowId" (click)="deleteItemArray(item, item.slNo)"><em class="fa fa-trash" aria-hidden="true"></em></td>

                    </tr>
                </tbody>
            </table>
        </div>
        <!-- <div class="row" >
        <div style="margin-top:32px!important" class="row">
                <table *ngIf="enableTable" class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>
                            <input type="checkbox" class="option-input radio" style="top:0px;" value="true" />
                          </th>
                          <th>SlNo</th>
                          <th>Creation Date</th>
                          <th>Shipment Date</th>
                          <th>Carrier</th>
                          <th>Origin</th>
          
                          <th>Destination</th>
          
                          <th>Class</th>
                          <th>Weight</th>
                          <th>Pallets</th>
                          <th>Inv Amt</th>
                          <th>Fuel</th>
                          
                        </tr>
                      </thead>
                      <tbody>
                        <tr class="title-tr" *ngIf="invalidInputData?.length> 0">
                          <td colspan="26">InValid Input Data</td>
                        </tr>
          
                        <tr class="blue-tr" *ngFor="let invoice of invalidInputData; let i=index;">
                          <td>
                            <input type="checkbox"  (change)="checkForSelected($event, i, 'outbound')" class="option-input radio" style="top:0px;" [checked]="invoice?.selected" />
                          </td>
                          <td>{{i+1}}</td>
                          <td>{{invoice?.createdOn | date:'MM-dd-yyyy'}}</td>
                          <td>{{invoice?.shipmentDate | date:'MM-dd-yyyy'}}</td>
                          <td>{{invoice?.carrier}}</td>
                          <td>{{invoice?.originZip}}, {{invoice?.originState}}</td>
          
                          <td>{{invoice?.destinationZip}}, {{invoice?.destinationState}}</td>
                          <td>{{invoice?.class}}</td>
                          <td>{{invoice?.weight}}</td>
                          <td>{{invoice?.pieces}}</td>
                          <td>${{invoice?.invoiceAmount}}</td>
                          <td>${{invoice?.fuelCharge}}</td>
                          
                        </tr>
                      </tbody>
                    </table>
              </div>
            </div> -->

        <!-- <div class="row" *ngIf="itemArray.length>0">
                <div class="col-sm-4 pull-right">
                  <pagination-controls (pageChange)="p = $event" class="pull-right"></pagination-controls>
                </div>
                <div class="col-sm-4">
                        <label>Items per page</label>
                        <select [(ngModel)]="selectPagination" (change)="selectRanges(selectPagination)" name="selectPagination">
                          <option *ngFor="let number of numberOfPages">{{number}}</option>
                        </select>
                      </div>
              </div> -->
        <div class="clearfix">&nbsp;</div>
    
    </div>
</div>

<!--//banner-->
<div class="clearfix">&nbsp;</div>
<div class="copy">
    <p>Â© 2018 Logistics . All Rights Reserved </p>
</div>
<a href="#" tabindex="-1" id="toTop" style="display: block;">
    <span id="toTopHover" style="opacity: 1;"> </span>
</a>
<!-- //smooth scrolling -->
<style>
    h2,
    .h2 {
        font-size: 12px !important;
    }

    h3,
    .h3 {
        font-size: 14px !important;
    }
</style>




      <div id="view-assessorial" class="modal" role="dialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
        <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" style="font-size: 35px;color: #ffffff">&times;</button>
        <h4 class="modal-title" style="color: #ffffff!important">&nbsp;Accessorial Details</h4>
        </div>
        <div class="modal-body">
        <div class="legend-body" style="margin-bottom: 10px;"> 
        <div class="row">
        <div class="col-sm-12">
        <p class="qt_hd">Company :<span class="qt_bd">{{this.companyDetails?.companyName}}</span></p>
        </div>
        <div class="col-sm-12">
                <p class="qt_hd">Total Accessorial Charge :<span class="qt_bd"> ${{viewAssessorialArray?.assessorialCharge}}</span></p>
                </div>
        
        <div class="table-responsive" style="overflow-x: inherit">
        <table class="table table-bordered" >
        <thead>
        <tr>
        <th style="border:1px solid #a4745b;font-size: 13px ">Accessorial Name</th>
        <th style="border:1px solid #a4745b;font-size: 13px">Charge ($)</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <!-- <td class="td_right"> <div>{{viewAssessorialArray?.assessorialCharge}}</div></td> -->
        <td class="td_right">
        <div *ngFor="let assessorial of viewAssessorialArray?.assessorial">{{assessorial.assessorialName}}</div></td>
        <td class="td_right">
        <div *ngFor="let assessorial of viewAssessorialArray?.assessorial">{{assessorial.charge}}</div>
      </td>
      </tr>
        </tbody>
        </table>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>

        <div id="carrierModal" class="modal" role="dialog" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
            <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" style="font-size: 35px;color: #ffffff">&times;</button>
            <h4 class="modal-title" style="color: #ffffff!important">&nbsp;Carrier</h4>
            </div>
            <div class="modal-body">
            <div class="legend-body" style="margin-bottom: 10px;"> 
                    <div class="row">
                            <div class="col-sm-12 text-center">
                              <label>Choose Carrier</label>
                              <div class="clearfix">&nbsp;</div>
                            </div>
                            <div class="col-md-3 form-group radio-group" *ngFor="let carrier of carrierArray" style="width:50%">
                              <input type="radio" class="option-input radio" id="serviceType"  [(ngModel)]="selectedCarrier"
                                (change)="checkForCarrier(selectedCarrier)" value={{carrier}} />
                              <label>{{carrier}}</label>
                            </div>
                          </div>
            </div>
            </div>
            <div class="modal-footer">
                    <div class="row">
                      
                      <div class="col-md-4 col-md-push-4 green-button text-center">
                        <button class="green-button" id="saveButtonModal" (click)="submitCarrier()"><em class="fa fa-save" aria-hidden="true" style="margin-right:5px;"></em>Save</button>
                      </div>
                    </div>
                  </div>
            </div>
            </div>
            </div>

            <div id="add-pieces-modal" class="modal" role="dialog"   data-keyboard="false">
                <div class="modal-dialog">
                  <!-- Modal content-->
                  <div class="modal-content">
                    <form [formGroup]="multiclassForm">
                    <div class="modal-header">
                      <button type="button" data-dismiss="modal" class="close">&times;</button>
                      <h4 class="modal-title"   style="font-size: 35px;color: #ffffff">&nbsp;Add Multiclass Data</h4>
                    </div>
                    <div class="modal-body" *ngIf="!weightEntered">
                        <div class="row">
                            <div class="col-sm-6">
                                <label id="weightDiv"> Total Weight</label>
                                <span style="color: #FF0000">*</span>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Weight" id="weightId" formControlName="weightEnter" (keydown)="checkEnterKey($event, 'weight')"
                                        ngPattern="/[0-9.]/" onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')" maxlength="5"
                                        autocomplete="nope">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-body" *ngIf="weightEntered">
                        <div class="row">
                              <div class="col-md-6">
                                  <h6 class="item-body">Total Weight : {{invoiceForm.value.weight}}  ttl</h6>
                            </div>  
                            </div>
                      <div class="row">
                          <!-- <div class="col-md-6 form-group">
                              <label>Pieces Count</label><span style="color:#FF0000">*</span>
                              <div class="input-group" style="display: flex">
                                  <input type="text" class="form-control" placeholder="Qty" id="packageQuantityForPieces"  
                                         maxlength="4" formControlName="packageQuantity"
                                         ngPattern="/[0-9]/" style="width:150px;"
                                         onkeyup="this.value=this.value.replace(/[^0-9]+/g,'')" 
                                         (keydown)="checkEnterKey($event, 'packageQuantityForPieces')" 
                                         (change)="checkForNumber(piecesForm.controls.packageQuantity.value, 'packageQuantityForPieces')"
                                        autocomplete="nope" required>
                                    <select class="form-control" id="packageUnitType" formControlName="packageUnitType" disabled>
                                        <option *ngFor="let package of packageUnitArray" value={{package}}>{{package}}</option>
                                      </select>        
                              </div>                
                          </div>    -->
                          <div class="col-md-6 form-group">
                            <label>Class</label><span style="color:#FF0000">*</span>
                            <input class="form-control" id="classificationMulti" name="classification" ngPattern="/[0-9.]/" maxlength="4" onkeyup="this.value=this.value.replace(/[^0-9.]+/g,'')"
                            (blur)="checkForClass1(multiclassForm.controls['classification'].value)" formControlName="classification" [typeahead]="classArray"
                            autocomplete="nope" (keydown)="checkEnterKey($event, 'classificationMulti')">
                        <span style="font-size: 14px;color: red" *ngIf="showErrorMessageForClass">The class is invalid</span>
                          </div> 
                          <div class="col-md-6 form-group">
                            <label>Weight</label>
                            <div class="input-group" style="display: flex">
                                <input type="text" class="form-control" id="weightForPieces" placeholder="(lbs)"   
                                (keydown)="checkEnterKey($event, 'weightForPieces')"
                                       maxlength="5" ngPattern="/[0-9]/" style="width:150px;" formControlName="multiclassweight"
                                       onkeyup="this.value=this.value.replace(/[^0-9]+/g,'')" 
                                       
                                       autocomplete="nope" required>
                                       <!-- <select class="form-control" id="weightUnit" disabled
                                       formControlName="weightUnit">
                                        <option *ngFor="let unit of weightUnitTypeArray" value="{{unit}}">{{unit}}</option>
                                        </select> -->
                                      </div>
                          </div>
                        </div>
                        
                        <div class="row" *ngIf="multiclassTable.length > 0">
                            <div class="table-responsive col-sm-12">
                                <table class="table-bordered table-responsive" style="color: #9c7357; width: 60%;">
                                    <tr class="text-center">
                                        <th class="text-center">Class</th>
                                        <th class="text-center">Weight</th>
                                        <th class="text-center">Delete</th>
                                    </tr>
                                    <tr *ngFor="let data of multiclassTable; let i = index">
                                        <td class="text-center" >{{data.classification}}</td>
                                        <td class="text-center" > {{data.multiclassweight}}</td>
                                         <td><em class="fa fa-minus-circle" aria-hidden="true" (click)="deletemulticlassrow(data, i)"></em>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                          <div class="row" *ngIf="multiclassTable?.length > 0 ">
                            <div class="col-md-6">
                                               <h6 class="item-body">Remaining Weight : {{headerDetailForShipment}} </h6>
                                               </div> 
                            </div>
                            <div class="row text-center" *ngIf="errorMessageForWeightCount">
                              <span class="text-center" style="color: #FF0000; font-size:14px">
                               {{showWeightVarianceMsg}}
                              </span>
                            </div>
  
                            
                    </div>
                    <div class="modal-footer" *ngIf="weightEntered">
                        <div class="row">
                          <div class="col-md-4 col-md-push-2 green-button text-center" >
                            <button class="logisticsBtn" id ="multiclassButton" style="width: 100%" (click)="addClassMulti(multiclassForm.value)">
                            <em class="fa fa-plus-circle" aria-hidden="true"  style="margin-right:5px;"></em>Add</button>
                          </div>
                
                          <div class="col-md-4 col-md-push-2 green-button text-center">
                            <button class="logisticsBtn" style="width: 100%"  data-dismiss="modal" >
                              <em class="fa fa-close" aria-hidden="true" style="margin-right:5px;"></em>Close</button>
                          </div>
                        </div>
                      </div>
                    <div class="modal-footer" *ngIf="!weightEntered">
                      <div class="row">
                        <div class="col-md-4 col-md-push-2 green-button text-center" >
                          <button class="logisticsBtn" id ="multiclassButton" style="width: 100%" (click)="addValue(multiclassForm.value)">
                          <em class="fa fa-plus-circle" aria-hidden="true"  style="margin-right:5px;"></em>Add</button>
                        </div>
              
                        <!-- <div class="col-md-4 col-md-push-2 green-button text-center">
                          <button class="logisticsBtn" style="width: 100%"  data-dismiss="modal" >
                            <em class="fa fa-close" aria-hidden="true" style="margin-right:5px;"></em>Close</button>
                        </div> -->
                      </div>
                    </div>
                   
                    </form>
                  </div>
                </div>
              </div>